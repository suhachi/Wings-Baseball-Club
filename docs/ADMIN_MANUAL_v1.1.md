# 📘 Wings Baseball Club Community PWA - 관리자 매뉴얼 (v1.1)

본 매뉴얼은 v1.1 리셋 버전을 기준으로 작성되었습니다.

---

## 1. 시작하기

### 1.1 관리자 계정
v1.1에서는 별도의 관리자 페이지 URL이 아닌, **권한이 부여된 계정**으로 앱에 접속하면 추가 기능이 활성화됩니다.
- **관리자 권한 확인**: `마이 페이지` > 프로필에 `ADMIN` 또는 `MANAGER` 배지가 표시됨.

### 1.2 주요 기능
- **회원 관리**: 가입 승인/거절, 등급 변경
- **게시글 관리**: 공지사항 및 이벤트(경기/모임) 작성, 게시글 삭제
- **투표 관리**: 경기 참석 투표 현황 확인 및 마감

---

## 2. 회원 관리 (Member Management)

회원 관리는 Firestore 데이터를 기반으로 동작합니다. (v1.1 UI 미구현 시 Firebase Console 사용)

### 2.1 가입 승인
- 신규 가입 시 기본 상태는 `pending` (승인 대기)입니다.
- **승인 방법**: `clubs/{clubId}/members/{uid}` 문서의 `status` 필드를 `active`로 변경.
- **거절 방법**: `status` 필드를 `rejected`로 변경하거나 문서 삭제.

### 2.2 등급 변경 (Admin 승격)
- 일반 회원을 운영진으로 승격하려면 `role` 필드를 변경합니다.
  - `MEMBER` → 일반 회원
  - `ADMIN` → 최고 관리자 (모든 권한)

---

## 3. 게시판 관리 (Board Management)

### 3.1 공지사항 (Notice) 작성
- **경로**: `게시판` 탭 > `공지` > 글쓰기 버튼 (✏️)
- **권한**: 관리자(`ADMIN`)만 작성 가능.
- **기능**: 제목, 내용 작성 시 **전체 회원에게 Push 알림**이 발송될 수 있습니다. (설정 의존)

### 3.2 이벤트/경기 일정 (Event) 작성
- **경로**: `게시판` 탭 > `이벤트` > 글쓰기 버튼 (✏️)
- **권한**: 관리자(`ADMIN`)만 작성 가능.
- **필수 입력**:
  - `제목`: 경기명 또는 모임명
  - `일시`: `startAt` (경기 시작 시간)
  - `상대팀/장소`: 선택 입력
- **투표 마감 정책**:
  - 입력한 `일시`의 **전날 23:00**에 투표가 자동으로 마감됩니다. (시스템 자동 설정)

### 3.3 자유게시판 (Free)
- 모든 회원이 자유롭게 작성할 수 있습니다.
- 관리자는 부적절한 게시글을 삭제할 수 있습니다.

---

## 4. 운영 정책 (v1.1 변경점)

### 4.1 제외된 기능 (사용 불가)
v1.1 리셋으로 인해 다음 기능은 더 이상 제공되지 않습니다:
- ❌ **회비/장부 (Finance/Dues/Ledger)**
- ❌ **경기 기록원/기록실 (Game Records)**
- ❌ **사진 앨범 (Album)**
- ❌ **초대 코드 및 링크 가입 (Invite)**

### 4.2 보안 및 접근 제어
- **Access Gate**: `active` 상태인 회원만 게시글을 열람할 수 있습니다.
- **Direct Write 차단**: 공지/이벤트는 앱의 공식 작성 기능을 통해서만 등록 가능하며, 비정상적인 데이터 조작은 차단됩니다.

---

## 5. 문제 해결 (Troubleshooting)

### Q. 'Access Denied' 페이지가 뜹니다.
- **A**: 회원 상태가 `active`가 아니기 때문입니다. 관리자에게 승인 요청을 하거나, Firebase Console에서 상태를 확인하세요.

### Q. 투표 버튼이 비활성화되었습니다.
- **A**: 경기 시작 전날 23:00가 지나 투표가 마감(`voteClosed: true`)되었기 때문입니다. 혹은 본인이 아니거나 권한이 없는 경우일 수 있습니다.

### Q. 공지사항 알림이 오지 않습니다.
- **A**: 브라우저/앱의 알림 권한이 허용되어 있는지 확인하세요. iOS의 경우 PWA를 홈 화면에 추가해야 알림이 동작할 수 있습니다.
